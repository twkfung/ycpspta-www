(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[516,163,447,937,923,947,839,394,347],{24654:function(){},70130:function(t,e,r){Promise.resolve().then(r.t.bind(r,78139,23)),Promise.resolve().then(r.bind(r,11179)),Promise.resolve().then(r.bind(r,23378))},96774:function(t,e,r){"use strict";r.d(e,{k:function(){return i}});var a=r(90440),s=r.n(a),n=r(25566);let i=s()({nestedKey:"payload",level:n.env.NEXT_LOGGER_LEVEL||"info",browser:{asObject:!0}});i.info("[Pino] Logger version is ".concat(i.version)),i.info("[Pino] Logger level is ".concat(i.level))},11179:function(t,e,r){"use strict";r.r(e),r.d(e,{Header:function(){return i}});var a=r(57437),s=r(39227),n=r(43226);function i(){return(0,a.jsx)(s.Z,{sx:{display:"flex",justifyContent:"center"},children:(0,a.jsx)(n.Z,{align:"center",variant:"h4",children:"油蔴地天主教小學(海泓道)家長教師會"})})}},23378:function(t,e,r){"use strict";r.r(e),r.d(e,{Posts:function(){return T}});var a,s,n,i=r(57437),o=r(96774),c=r(82498),d=r.n(c),g=r(74548),l=r.n(g),h=r(6537),u=r.n(h),p=r(82399),f=r.n(p),w=r(35140),y=r.n(w);l().extend(u()),l().extend(f()),l().extend(y());var v=l();(a=n||(n={})).djsAnniversarySince=v("2022-09-01"),(a.wpTagSlugs||(a.wpTagSlugs={})).tag2022To2024="2022-2024",(s=a.wpCategorySlugs||(a.wpCategorySlugs={})).categoryMembersNews="members-news",s.categoryPtaWords="pta-words";class x{static create(t){return new x(t)}async loadCategories(){try{let t=await this.wp.categories();t.forEach(t=>{this.categoryIdMap.set(t.slug,t)}),this.categoriesLoaded=!0}catch(t){throw o.k.error(t,"Error loading categories"),t}}async loadTags(){try{let t=await this.wp.tags();t.forEach(t=>{this.tagIdMap.set(t.slug,t)}),this.tagsLoaded=!0}catch(t){throw o.k.error(t,"Error loading tags"),t}}async getCategoryId(t){this.categoriesLoaded||await this.loadCategories();let e=this.categoryIdMap.get(t);if(!e)try{let e=await this.wp.categories().slug(t),r=e[0];this.categoryIdMap.set(r.slug,r)}catch(r){let e="Error fetching category: ".concat(t);throw o.k.error(e),Error(e)}if(e=this.categoryIdMap.get(t))return e.id}async getTagId(t){this.tagsLoaded||await this.loadTags();let e=this.tagIdMap.get(t);if(!e)try{let e=await this.wp.tags().slug(t),r=e[0];this.tagIdMap.set(r.slug,r)}catch(r){let e="Error fetching tag: ".concat(t);throw o.k.error(e),Error(e)}if(e=this.tagIdMap.get(t))return e.id}async loadPublishedPosts(t){let{categorySlug:e,tagSlug:r}=t,[a,s]=await Promise.all([this.getCategoryId(e),this.getTagId(r)]);if(void 0===a||void 0===s)throw o.k.error({categorySlug:e,catId:a,tagSlug:r,tagId:s},"undefined category or tag"),Error("undefined category or tag");let i=await this.wp.posts().status("publish").categories(a).tags(s).after(n.djsAnniversarySince.toISOString()).orderby("date").order("desc").get();o.k.info("fetched ".concat(i.length," posts"));let c=this.mapWpPosts(i);return c}mapWpPosts(t){return t.map(t=>E(t))}constructor(t){this.categoryIdMap=new Map,this.tagIdMap=new Map,this.categoriesLoaded=!1,this.tagsLoaded=!1,this.wp=t}}let j=x.create(new(d())({endpoint:"https://pta.ycps.edu.hk/wp-json"})),E=t=>({postId:t.id,date:v(t.date),guid:t.guid.rendered,title:t.title.rendered,content:t.content.rendered,excerpt:t.excerpt.rendered});var I=r(2265),P=r(6882),m=r(98075),k=r(74404),b=r(29872),M=r(43226);r(11179);var L=r(28179),S=r(81130),Z=r(91331);let C=t=>{let{children:e}=t;return(0,i.jsx)(L.D,{remarkPlugins:[S.Z],rehypePlugins:[Z.Z],children:e})};function T(t){let{categorySlug:e,tagSlug:r}=t,[a,s]=(0,I.useState)(null),[n,c]=(0,I.useState)(!0),[d,g]=(0,I.useState)([]);return(0,I.useEffect)(()=>{let t=async()=>{try{let t=await j.loadPublishedPosts({categorySlug:e,tagSlug:r});g(t)}catch(t){o.k.error(t,"error fetching posts"),s(t)}finally{c(!1)}};t()},[e,r]),(0,i.jsxs)("section",{children:[n&&(0,i.jsx)(P.Z,{}),(0,i.jsx)(m.Z,{divider:(0,i.jsx)(k.Z,{flexItem:!0}),children:d.map(t=>(0,i.jsxs)(b.Z,{component:"article",sx:{padding:1},elevation:4,children:[(0,i.jsxs)(m.Z,{children:[(0,i.jsx)(M.Z,{variant:"h6",children:t.title}),(0,i.jsx)(M.Z,{variant:"caption",children:t.date.fromNow()})]}),(0,i.jsx)(C,{children:t.content})]},t.guid))})]})}}},function(t){t.O(0,[139,151,833,249,971,596,744],function(){return t(t.s=70130)}),_N_E=t.O()}]);